(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{9395:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hangName",function(){return i(5120)}])},5120:function(e,t,i){"use strict";i.r(t),i.d(t,{HANGOUT_ASSETS_BASE_URL:function(){return I},default:function(){return k}});var n=i(5893),s=i(9360),r=i(1730),o=i(4440),a=i(1163),l=i(7294),d=i(5490),c=i(9784),p=i(4934),u=i(4467),g=i(6937);let{createData:h,ArweaveSigner:x}=u.default?u.default:u,f=e=>{let{npcImg:t,npcName:i,message:s,nextQuestion:r}=e,[o,a]=(0,l.useState)(""),[d,c]=(0,l.useState)(0),p=(0,l.useRef)(null),[u,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(s){let e=0,t=()=>{a(t=>t+s.charAt(e)),++e<s.length&&(setTimeout(t,50),g(!0))};a(" "),t()}},[s]);let h=()=>{if(""===o)return[];let e=[],t="";for(let i of o)(t+i).length<=100?t+=i:(e.push(t),t=i);return t&&e.push(t),e};return(0,l.useEffect)(()=>{s&&(a(s),g(!0))},[s]),(0,n.jsx)("div",{className:"footer",style:{position:"fixed",background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 20%)",bottom:0,width:"100%",height:"150px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 10%",color:"#ECECEC"},children:(0,n.jsxs)("div",{style:{display:"flex"},children:[t&&(0,n.jsx)("img",{src:t,alt:"",style:{marginBottom:"30px",width:"220px"}}),(0,n.jsxs)("div",{style:{marginTop:"50px",marginLeft:"20px"},children:[(0,n.jsx)("div",{style:{color:"#C8C8C8",height:"32px",textAlign:"left",paddingLeft:"4px",lineHeight:"32px",marginBottom:"10px"},children:i}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-end"},children:[(0,n.jsx)("div",{style:{height:"80px",width:"830px",lineHeight:"26px",overflow:"hidden",position:"relative"},ref:p,onWheel:e=>e.preventDefault(),children:""===o.trim()?i?(0,n.jsx)("span",{className:"blinking-pipe",children:"|"}):"":(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:(()=>{let e=h(),t=3*d;return e.slice(t,t+3).join("<br/>")})()}})})}),(0,n.jsx)("div",{children:u&&(0,n.jsx)("img",{src:"/footer_bottom.jpg",alt:"",style:{width:"20px",marginTop:"20px",cursor:"pointer"},className:"logo_loading",onClick:e=>{e.stopPropagation(),d<Math.ceil(h().length/3)-1?c(e=>e+1):r()}})})]})]})]})})},m=e=>{let{onContinue:t}=e,[i,s]=(0,l.useState)(""),[r,o]=(0,l.useState)(""),[a,u]=(0,l.useState)(""),[g,h]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),[y,w]=(0,l.useState)(!1),[v,b]=(0,l.useState)(!1),j=async()=>{if(""!==i.trim()){h("  "),m(!0),localStorage.setItem("inputValueName",i);let e=JSON.parse(localStorage.getItem("npc")||"{}"),t=await d.W.post(c.Z.post_npc_agent_chatStream,{npcId:null==e?void 0:e.id,conversationType:"tone",query:"".concat(i,"，也许你会认为我只是一个 AI，那可不一定。我是 AI，也是").concat(e.name,"，在 Hang Out 中，AI 和真人交替活跃，共享着同样的行为和记忆。说不好，现在和你对话的就是真人呢，哈哈。（用你的口吻表达）")});if("string"==typeof t){let e=t.split("\n").filter(e=>""!==e.trim()),i=[];e.forEach(e=>{let t=JSON.parse(e.replace("data:",""));"message"===t.event||"agent_message"===t.event?i.push(t.answer):"message_file"===t.event&&i.push(t.url)}),h(i.filter(e=>""!==e).join("")),m(!1),w(!0)}}};return(0,l.useEffect)(()=>{(async()=>{let e=JSON.parse(localStorage.getItem("npc")||"{}");"string"==typeof e.icoConfig&&o(JSON.parse(e.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"')).bust_chat),u(e.name||""),localStorage.setItem("npc",JSON.stringify(e));let t=await d.W.post(c.Z.post_npc_agent_chatStream,{npcId:e.id,conversationType:"tone",query:"我叫XX（XX=你在instruction被设定的名字），和你一样，是Hang Out里一名普通的游戏玩家。（用你的口吻表达）"});if("string"==typeof t){let e=t.split("\n").filter(e=>""!==e.trim()),i=[];e.forEach(e=>{let t=JSON.parse(e.replace("data:",""));"message"===t.event||"agent_message"===t.event?i.push(t.answer):"message_file"===t.event&&i.push(t.url)}),h(i.filter(e=>""!==e).join("")+"How should I call you?"),setTimeout(()=>{b(!0)},2e3)}})()},[]),(0,n.jsxs)("div",{onClick:()=>{y&&t()},style:{position:"fixed",width:"100%",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[!y&&(0,n.jsx)(n.Fragment,{children:x||!v?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{className:"input",type:"text",placeholder:"Please enter your name",style:{width:"480px",height:"50px",background:"rgba(0, 0, 0, 0.8)",border:"2px solid rgba(255, 255, 255, 0.4)",color:"#ececec",marginBottom:"20px",outline:"none",paddingLeft:"20px",borderRadius:"10px"},value:i,onChange:e=>s(e.target.value)}),!x&&(0,n.jsx)("div",{onClick:j,style:{backgroundImage:"url(/continue_bg.svg)",width:"480px",height:"64px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"Continue"}),x&&(0,n.jsx)("div",{onClick:j,style:{backgroundImage:"url(/continue_bg.svg)",width:"480px",height:"64px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(p.Z,{size:50,sx:{color:"#ececec"}})})]})}),(0,n.jsx)(f,{npcImg:r,npcName:a,message:g,nextQuestion:()=>{}})]})},y=e=>{let{onContinue:t}=e,{updateAgent:i}=(0,g.N2)(),[s,r]=(0,l.useState)(0),[o,a]=(0,l.useState)([[],[],[],[]]),[u,h]=(0,l.useState)(!0),[x,m]=(0,l.useState)(!1),[y,w]=(0,l.useState)(!1),[v,b]=(0,l.useState)(!0),[j,S]=(0,l.useState)(""),[C,I]=(0,l.useState)(""),[k,_]=(0,l.useState)(""),F=[{text:"",type:"multiSelect",options:["EA FC","The Legend of Zelda: Breath of the Wild","Grand Theft Auto V","League of Legends","Fortnite","Minecraft","Call of Duty: Modern Warfare II","Among Us","Animal Crossing: New Horizons","Red Dead Redemption 2","Cyberpunk 2077","The Witcher 3: Wild Hunt","Super Mario Odyssey","PUBG Mobile","Genshin Impact","Apex Legends","Overwatch 2","Valorant","Elden Ring","God of War Ragnar\xf6k","Monster Hunter: World","Halo Infinite","Dark Souls III","Final Fantasy VII Remake","Assassin's Creed Valhalla","Battlefield 2042","Ghost of Tsushima","Hades","Resident Evil Village","The Sims 4","Splatoon 3","Horizon Forbidden West","Doom Eternal","Sekiro: Shadows Die Twice","Rocket League","Destiny 2","World of Warcraft","Diablo III","Stardew Valley","Roblox","Mortal Kombat 11","NBA 2K23","Fall Guys: Ultimate Knockout","Pok\xe9mon Sword and Shield","Tetris 99","Fire Emblem: Three Houses","Ring Fit Adventure","Hollow Knight","Dead by Daylight","The Last of Us Part II","Cuphead","Nier: Automata","Control","Marvel's Spider-Man","Death Stranding","Nioh 2","Star Wars Jedi: Fallen Order","Persona 5 Royal","Hitman 3","Hollow Knight: Silksong","Bloodborne","Outer Wilds","Disco Elysium","Yakuza: Like a Dragon","Subnautica","No Man's Sky","Returnal","A Plague Tale: Requiem","Bayonetta 3","Metroid Dread","Xenoblade Chronicles 3","Mario Kart 8 Deluxe","Super Smash Bros. Ultimate","Luigi's Mansion 3","Animal Crossing: Pocket Camp","Clash of Clans","Clash Royale","Brawl Stars","Pok\xe9mon GO","Candy Crush Saga","Angry Birds","Temple Run","Subway Surfers","Asphalt 9: Legends","Plants vs. Zombies","Crossy Road","Monument Valley","PUBG","Garena Free Fire","Mobile Legends: Bang Bang","Dragon Ball Z: Dokkan Battle","Clash Heroes","Fortnite Mobile","COD: Mobile","Gwent: The Witcher Card Game","Shadow Fight 3","Injustice 2","The Elder Scrolls V: Skyrim","Fallout 4","Borderlands 3"]},{text:"Our adventure party is lost in the Haunted Forest of the Aldaran continent, with our food and water supplies nearly depleted. After days of struggling, we stumble upon the legendary Castle Kalem. At this moment, a massive magical storm cyclone is swiftly approaching, and without shelter, we might be in grave danger. What would you do?",type:"mixed",options:["Hold off on making a decision and listen to the suggestions of your teammates.","Don't hesitate, and head into the castle immediately to avoid the imminent danger.","This seems too convenient, like it's pushing us inside. We must resist and face the storm head-on.","This feels like a trap; suggest we circle around the castle and look for another entrance."]},{text:"In the dark Castle Kalem, the castle's master and alchemist Edgar is found dead in his study, killed by a poisoned arrow. Outside, the storm rages, and all exits are sealed while communication has been cut off. You are informed that you have 24 hours to find the murderer, or more deaths will occur. There are five suspects within the castle: Edgar’s wife, the butler, the gardener, the cook, and one of his alchemy apprentices. What is your first step?",type:"mixed",options:["time pressure cloud your judgment; continue to search for subtle clues and thoroughly question the suspects.","Spread fabricated information and false rumors, such as claiming that Edgar’s wife had an affair with the alchemy apprentice, to disrupt the situation and observe the suspects’ reactions.","Pretend to be indifferent, then stealthily stake out the scene to see if anyone becomes agitated and reveals their hand.",'Confess: "I am the murderer, hahaha!"']},{text:"The adventuring party is trapped in the underground tomb of Castle Kalem. The heavy stone door has shut, the air is becoming scarce, and time is running out. In the center, a stone slab inscribed with intricate runes seems crucial. You must solve the puzzle on the slab to escape within the limited time. What will you do?",type:"mixed",options:["Rely on my superior intellect to find a way to decipher the slab.","The clues on the slab might be elsewhere; search the surroundings, such as the walls.","Without any other ideas, I will experiment with different combinations of the runes on the slab; eventually, something will work.","I detest puzzles. Strike a pose and wait for the end, elegantly."]}],N=e=>{let t=[...o];t[s]=e,a(t)},E=e=>{let t=[...o],i=t[s];i.includes(e)?t[s]=i.filter(t=>t!==e):t[s]=[...i,e],a(t)},R=async()=>{try{let e=JSON.parse(localStorage.getItem("npc")||"{}");if("string"==typeof e.icoConfig){let t=e.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"');try{let i=JSON.parse(t);S(i.bust_chat),I(e.name)}catch(e){console.error("Error parsing icoConfig:",e)}}else console.warn("npc.icoConfig is not a string or is missing.");if(e.id){let t=await d.W.post(c.Z.post_npc_agent_chatStream,{npcId:e.id,conversationType:"tone",query:"简述下自己喜欢的游戏、印象深刻的游戏经历或者游戏角色，说一两个就行"});if("string"==typeof t){let e=t.split("\n").filter(e=>""!==e.trim()).map(e=>{try{return JSON.parse(e.replace("data:",""))}catch(e){return console.error("Error parsing line:",e),null}}).filter(e=>e&&["message","agent_message","message_file"].includes(e.event)).map(e=>e.answer||e.url);_(e.filter(e=>""!==e).join("")+"What games do you usually play?"),setTimeout(()=>{m(!0)},2e3)}else console.warn("Chat response is not a string.")}else console.warn("npc.id is missing or invalid.")}catch(e){console.error("Error in featDate:",e)}};(0,l.useEffect)(()=>{R()},[]);let O=async()=>{if(!o[s]||0===s&&!o[0].length)return;w(!0),h(!1),b(!0);let e=JSON.parse(localStorage.getItem("npc")||"{}");e.icoConfig&&S(JSON.parse(e.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"')).bust_chat),I(e.name),_("  ");let t=async t=>{let i=await d.W.post(c.Z.post_npc_agent_chatStream,{npcId:null==e?void 0:e.id,conversationType:"tone",query:t});return"string"==typeof i?i.split("\n").filter(e=>""!==e.trim()).map(e=>JSON.parse(e.replace("data:",""))).filter(e=>["message","agent_message","message_file"].includes(e.event)).map(e=>e.answer||e.url).filter(e=>""!==e).join(""):""};if(s<F.length-1)0===s?(_(await t(JSON.stringify({question:"",answers:o[0]}))+await t("接下来我们玩几个简单的文字游戏，这些将构建一个和我一样，活跃于Hang Out的智能体（用你的口吻表达）")),w(!1)):1===s?(_(await t(JSON.stringify({question:F[1].text,answers:o[1]}))+"Let’s move on to the next stop."),w(!1)):2===s&&(_(await t(JSON.stringify({question:F[2].text,answers:o[2]}))+"Let’s move on to the next stop."),w(!1));else if(3===s){_(await t(JSON.stringify({question:F[3].text,answers:o[3]}))),w(!1);let s=await d.W.post(c.Z.post_npc_upload_awareness,{npcId:e.id,awareness:JSON.stringify({name:localStorage.getItem("inputValueName"),questionsList:[{question:"",answers:o[0]},{question:F[1].text,answers:o[1]},{question:F[2].text,answers:o[2]},{question:F[3].text,answers:o[3]}]})});if(s&&"object"==typeof s&&"instruction"in s&&"icoConfig"in s){if(s&&"object"==typeof s&&s.instruction&&"string"==typeof s.instruction){var n,r,a,l,p,u;localStorage.setItem("instructions",s.instruction);let e=null!==(n=localStorage.getItem("accountUserName"))&&void 0!==n?n:"",t=null!==(r=localStorage.getItem("accountDisplayName"))&&void 0!==r?r:"",o=null!==(a=localStorage.getItem("accountDescription"))&&void 0!==a?a:"",d=null!==(l=localStorage.getItem("accountProfileImage"))&&void 0!==l?l:"",c=null!==(p=localStorage.getItem("accountCoverImage"))&&void 0!==p?p:"",g=null!==(u=localStorage.getItem("aoProfileId"))&&void 0!==u?u:"",h=s.instruction;if(!e||!g||(console.log("没有instruction"),!h))return;console.log("有instruction"),console.log("有userName++++++aoProfileId",e,g),i(e,t,o,d,c,h,g)}else localStorage.setItem("instructions","");localStorage.setItem("userInfo",JSON.stringify(s.icoConfig));let e=localStorage.getItem("aoProfileId")||"";await d.W.post(c.Z.post_upload_awareness_url,{awreaveUrl:e})}}},T=()=>{u||(s<F.length-1?(r(e=>e+1),h(!0),b(!1)):t())},A=()=>{let e=F[s];return"multiSelect"===e.type?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{margin:"20px 0"},children:"Game tag"}),(0,n.jsx)("p",{style:{marginBottom:"20px"},children:e.text}),(0,n.jsx)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",height:"300px",overflowY:"auto"},children:e.options.map((e,t)=>(0,n.jsx)("div",{style:{cursor:"pointer",padding:"16px 24px",border:"2px solid rgba(255, 255, 255, 0.4)",borderRadius:"8px",color:o[s].includes(e)?"black":"#FFFFFF",backgroundColor:o[s].includes(e)?"#FFFFFF":"transparent"},onClick:()=>E(e),children:e},t))})]}):"mixed"===e.type?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{margin:"20px 0"},children:"Game guide"}),(0,n.jsx)("p",{style:{marginBottom:"20px",textAlign:"center"},children:e.text}),(0,n.jsx)("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap"},children:e.options.map((e,t)=>(0,n.jsx)("div",{style:{width:"100%",textAlign:"center",cursor:"pointer",padding:"16px 24px",border:"2px solid rgba(255, 255, 255, 0.4)",borderRadius:"8px",color:"string"==typeof o[s]&&o[s]===e?"black":"#FFFFFF",backgroundColor:"string"==typeof o[s]&&o[s]===e?"#FFFFFF":"transparent"},onClick:()=>N(e),children:e},t))}),(0,n.jsx)("input",{placeholder:"Custom input box",style:{width:"100%",height:"50px",background:"rgba(0, 0, 0, 0.8)",border:"2px solid rgba(255, 255, 255, 0.4)",color:"#ececec",marginBottom:"20px",outline:"none",paddingLeft:"20px",borderRadius:"10px",marginTop:"24px"},type:"text",onChange:e=>N(e.target.value)})]}):void 0};return(0,n.jsxs)("div",{className:"questions_component",style:{position:"absolute",width:"100%",height:"100%"},children:[(0,n.jsxs)("div",{style:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",left:"35%",height:"60px",border:"2px solid #C8C8C8",borderTop:"none",color:"#fff",width:"440px",background:"rgba(0,0,0,0.72)"},children:[(0,n.jsx)("p",{children:"Upload Progress"}),(0,n.jsx)("div",{style:{margin:"0 10px",width:"40%",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.4)"},children:(0,n.jsx)("div",{style:{width:"".concat(25*s,"%"),height:"8px",backgroundColor:"#FFFFFF"}})}),(0,n.jsx)("div",{style:{position:"relative"},children:"".concat(25*s,"%")})]}),x&&(0,n.jsxs)(n.Fragment,{children:[u&&!y&&(0,n.jsxs)("div",{style:{position:"absolute",top:"80px",left:"10%",zIndex:100,width:"80%",padding:"10px 24px",background:"rgba(0, 0, 0, 0.8)",borderRadius:"4px",border:"1px solid #C8C8C8",color:"#fff"},children:[A(),(0,n.jsx)("div",{onClick:O,style:{width:"50%",height:"64px",borderRadius:"16px",lineHeight:"64px",cursor:"pointer",textAlign:"center",background:o[s]?"#fff":"#858585",color:o[s]?"#000":"#fff",margin:"24px auto"},children:"Continue"})]}),!u&&y&&(0,n.jsxs)("div",{style:{position:"absolute",top:"80px",left:"10%",zIndex:100,width:"80%",padding:"10px 24px",background:"rgba(0, 0, 0, 0.8)",borderRadius:"4px",border:"1px solid #C8C8C8",color:"#fff"},children:[y&&A(),!u&&y&&(0,n.jsx)("div",{style:{width:"50%",height:"64px",borderRadius:"16px",lineHeight:"64px",cursor:"pointer",textAlign:"center",background:o[s]?"#fff":"#858585",color:o[s]?"#000":"#fff",margin:"24px auto"},children:(0,n.jsx)(p.Z,{size:50,sx:{color:"#000",padding:"10px"}})})]})]}),(0,n.jsx)("div",{style:{width:"100%",height:"80vh"},onClick:T}),v&&!y&&(0,n.jsx)(f,{npcName:C,npcImg:j,message:k,nextQuestion:T})]})},w=e=>{let{onContinue:t}=e;return(0,n.jsxs)("div",{className:"questions_component",style:{position:"absolute",width:"100%",height:"100%"},children:[(0,n.jsxs)("div",{style:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",left:"35%",height:"60px",border:"2px solid #C8C8C8",borderTop:"none",color:"#fff",width:"440px",background:"rgba(0,0,0,0.72)"},children:[(0,n.jsx)("p",{children:"Upload Progress"}),(0,n.jsx)("div",{style:{margin:"0 10px",width:"40%",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.4)"},children:(0,n.jsx)("div",{style:{width:"100%",height:"8px",backgroundColor:"#FFFFFF"}})}),(0,n.jsx)("div",{style:{position:"relative"},children:"100%"})]}),(0,n.jsxs)("div",{style:{position:"absolute",top:"20%",left:"35%",zIndex:100,width:"440px",padding:"10px 24px",background:"rgba(0, 0, 0, 0.8)",borderRadius:"4px",border:"1px solid #C8C8C8",color:"#fff"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{textAlign:"center"},children:"Congrats! "}),(0,n.jsx)("img",{src:"/happy.jpg",alt:"",style:{width:"145px",marginLeft:"30%"}}),(0,n.jsx)("p",{children:"You've successfully created your very own AI Life in the Hang Out universe. It's unique to you and will be deployed on a decentralized network, so it’ll never lose its memory or disappear. You can check out your AI Life in your Personal Center"})]}),(0,n.jsx)("div",{onClick:()=>{t()},style:{height:"64px",borderRadius:"16px",lineHeight:"64px",cursor:"pointer",textAlign:"center",margin:"24px auto",background:"#fff",color:"#000"},children:"Continue"})]})]})},v=e=>{let{onContinue:t}=e,[i,s]=(0,l.useState)("addFriend"),[r,o]=(0,l.useState)(""),[a,u]=(0,l.useState)(""),[g,h]=(0,l.useState)(!1),[x,m]=(0,l.useState)(""),[y,w]=(0,l.useState)(!0),[v,b]=(0,l.useState)(!0),[j,S]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("npc")||"{}");if(e.icoConfig){let t=e.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"');try{let e=JSON.parse(t);o(e.bust_chat)}catch(e){console.error("Error parsing icoConfig:",e)}}u(e.name),k("恭喜你完成了智能体的创建，请问你愿意成为我的朋友吗？之后我们可以互相访问，你也可以邀请我参与你的游戏。（用你的口吻表达）")},[]);let C=e=>{s(e)},I=async()=>{b(!1),h(!0),m("  ");let e=JSON.parse(localStorage.getItem("npc")||"{}"),t=localStorage.getItem("inputValueName");"addFriend"===i?(d.W.post(c.Z.post_add_friend,{npcId:e.id}),localStorage.setItem("addfirend","true"),await k("".concat(t,"选择添加你为好友（用你的口吻表达）"))):(await k("".concat(t,"拒绝添加你为好友（用你的口吻表达）")),localStorage.setItem("addfirend","false")),w(!1),h(!1)},k=async e=>{let t=JSON.parse(localStorage.getItem("npc")||"{}"),i=await d.W.post(c.Z.post_npc_agent_chatStream,{npcId:null==t?void 0:t.id,conversationType:"tone",query:e});if("string"==typeof i){let e=i.split("\n").filter(e=>""!==e.trim()),t=[];e.forEach(e=>{let i=JSON.parse(e.replace("data:",""));"message"===i.event||"agent_message"===i.event?t.push(i.answer):"message_file"===i.event&&t.push(i.url)}),m(t.filter(e=>""!==e).join(""))}S(!0)};return(0,l.useEffect)(()=>{let e=()=>{t()};return y?document.removeEventListener("click",e):document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[y,t]),(0,n.jsxs)("div",{className:"hang_name_layout",children:[j&&v&&!g&&(0,n.jsxs)("div",{style:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",width:"576px",padding:"24px",background:"rgba(0, 0, 0, 0.8)",borderRadius:"16px",color:"#fff"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("button",{style:{width:"48%",marginRight:"10px",padding:"15px 30px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",backgroundColor:"addFriend"===i?"white":"#333",color:"addFriend"===i?"black":"white",border:"none"},onClick:()=>C("addFriend"),children:"Add to contacts"}),(0,n.jsx)("button",{style:{width:"48%",padding:"15px 30px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",backgroundColor:"refuse"===i?"white":"#333",color:"refuse"===i?"black":"white",border:"none"},onClick:()=>C("refuse"),children:"Refuse"})]}),(0,n.jsx)("button",{style:{width:"100%",padding:"15px 30px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",backgroundColor:"white",color:"black",border:"none",marginTop:"20px"},onClick:I,children:"Continue"})]}),g&&(0,n.jsxs)("div",{style:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",width:"576px",padding:"24px",background:"rgba(0, 0, 0, 0.8)",borderRadius:"16px",color:"#fff"},children:[(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("button",{style:{width:"48%",marginRight:"10px",padding:"15px 30px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",backgroundColor:"addFriend"===i?"white":"#333",color:"addFriend"===i?"black":"white",border:"none"},onClick:()=>C("addFriend"),children:"Add to contacts"}),(0,n.jsx)("button",{style:{width:"48%",padding:"15px 30px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",backgroundColor:"refuse"===i?"white":"#333",color:"refuse"===i?"black":"white",border:"none"},onClick:()=>C("refuse"),children:"Refuse"})]}),(0,n.jsx)("button",{style:{width:"100%",padding:"10px 30px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",backgroundColor:"white",color:"black",border:"none",marginTop:"20px"},children:(0,n.jsx)(p.Z,{size:30,sx:{color:"#000"}})})]}),(0,n.jsx)(f,{npcName:a,npcImg:r,message:x,nextQuestion:()=>{}})]})},b=(e,t,i)=>{let n=parseFloat(e.x)*(t||100)/100;return{x:n,y:parseFloat(e.y)*(i||100)/100,width:parseFloat(e.width)*(t||100)/100,height:parseFloat(e.height)*(i||100)/100}},j=e=>{let{onContinue:t}=e,[i,s]=(0,l.useState)(null),[r,o]=(0,l.useState)(null),[u,g]=(0,l.useState)(null),[h,x]=(0,l.useState)(null),[m,y]=(0,l.useState)(localStorage.getItem("walletAddress")||""),[w,v]=(0,l.useState)(localStorage.getItem("walletKey")),[j,S]=(0,l.useState)(localStorage.getItem("aoProfileId")||""),[C,I]=(0,l.useState)(""),[k,_]=(0,l.useState)(""),[F,N]=(0,l.useState)(""),[E,R]=(0,l.useState)(!0),[O,T]=(0,l.useState)(!1),[A,L]=(0,l.useState)(!1),[D,J]=(0,l.useState)(JSON.parse(localStorage.getItem("userInfo")||"{}")),[W,z]=(0,l.useState)(JSON.parse(localStorage.getItem("npc")||"{}")),q=(0,a.useRouter)(),P=e=>()=>{navigator.clipboard.writeText(e).then(()=>{console.log("Copied successfully: ".concat(e))}).catch(t=>{console.error("Copy failed: ".concat(e),t)})},H=e=>{s(e)},M=async()=>{try{let i=await d.W.post(c.Z.get_user_wallet,{device:{appCode:"string",deviceID:"string",imei:"string",osplatform:"string",osversion:"string",version:"string"}},{headers:{"Content-Type":"application/json"}});if(i&&1==i.code){var e,t;i.wallet.walletAddress&&y(null===(e=i.wallet)||void 0===e?void 0:e.walletAddress),i.wallet.privateKey&&v(null===(t=i.wallet)||void 0===t?void 0:t.privateKey)}return i.data}catch(e){return console.error(e),null}};(0,l.useEffect)(()=>{M()},[]),(0,l.useEffect)(()=>{{let e=()=>{o(window.innerWidth),g(window.innerHeight)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}},[]),(0,l.useEffect)(()=>{if("string"==typeof D){let e=D.replace(/\n/g,"").replace(/“|”/g,'"');try{let t=JSON.parse(e);J(t)}catch(e){console.error("Error parsing userInfo:",e)}}if(W&&"string"==typeof W.icoConfig){let e=W.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"');try{let t=JSON.parse(e);z(t)}catch(e){console.error("Error parsing npcConfig:",e)}}},[D,W]);let B=[{id:1,x:"45%",y:"22%",width:16,height:20,src:"/dianshi.png"},{id:2,x:"63%",y:"28%",width:9,height:33,src:"/youxiji.png"},{id:3,x:"75%",y:"64%",width:10,height:29,src:"/shafa.png"},{id:4,x:"46%",y:"68.4%",width:7,height:16,src:D.sofa}];"true"===localStorage.getItem("addfirend")&&B.push({id:5,x:"54.6%",y:"68.4%",width:7,height:16,src:W.sofa},{id:6,x:"55%",y:"58%",width:6,height:6,src:"/Session.png"}),B.push({id:6,x:"48%",y:"12%",width:10,height:6,src:"/ComingSoon.png"},{id:7,x:"62%",y:"20%",width:10,height:6,src:"/PKGame.png"},{id:8,x:"74%",y:"56%",width:10,height:6,src:"/Openfriendlist.png"},{id:9,x:"44%",y:"58%",width:10,height:6,src:"/PersonalCenter.png"});let[Z,K]=(0,l.useState)(""),[G,U]=(0,l.useState)(""),V=async()=>{if(""!==Z.trim()){T(!0),L(!0);let e=JSON.parse(localStorage.getItem("npc")||"{}");e.icoConfig&&I(JSON.parse(e.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"')).bust_chat),_(e.name),N("  ");let t=await d.W.post(c.Z.post_npc_agent_chatStream,{npcId:null==e?void 0:e.id,conversationType:"chat",query:"".concat(Z),conversationId:G});if("string"==typeof t){let e=t.split("\n").filter(e=>""!==e.trim()),i=[];e.forEach(e=>{let t=JSON.parse(e.replace("data:",""));U(t.conversation_id),"message"===t.event||"agent_message"===t.event?i.push(t.answer):"message_file"===t.event&&i.push(t.url)}),K(""),N(i.filter(e=>""!==e).join("")),T(!1)}}},[Y,X]=(0,l.useState)([]),$=async e=>{if(x(e),3==e){let e=await d.W.post(c.Z.post_hangout_friend_list);if(e&&"object"==typeof e&&1===e.code){let t=e.friends||[];Array.isArray(t)&&X(t)}}2==e&&q.push("/personality")},Q=(0,l.useRef)(null),ee=e=>{Q.current&&!Q.current.contains(e.target)&&(x(null),L(!1))};(0,l.useEffect)(()=>(document.addEventListener("mousedown",ee),()=>{document.removeEventListener("mousedown",ee)}),[]),(0,l.useEffect)(()=>{setTimeout(()=>{R(!1)},2e3)},[]);let[et,ei]=(0,l.useState)(""),[en,es]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=localStorage.getItem("instructions");e&&(ei(e),es(e.replace(/\[(.*?)\]\((.*?)\)/g,"$1").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/^#+\s(.*)$/gm,"$1").replace(/^\s*[-*]\s(.*)$/gm,"$1").replace(/`(.*?)`/g,"$1").replace(/```[\s\S]*?```/g,"").trim()))},[]),(0,n.jsxs)("div",{children:[E&&(0,n.jsx)("div",{style:{zIndex:100,background:"#212121",width:"100%",height:"100vh",display:"flex",justifyContent:"center"},children:(0,n.jsx)("img",{src:"/logo_loading.svg",alt:"",style:{width:"140px"},className:"logo_loading"})}),(0,n.jsx)("div",{style:{position:"relative",width:"100vw",height:"100vh"},children:(0,n.jsxs)("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundImage:"url(/hang_out_bg.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"},onMouseLeave:()=>{s(null)},children:[B.map(e=>{let{x:t,y:o,width:a,height:l}=b(e,r,u);return(0,n.jsx)("img",{onClick:()=>$(e.id),style:{cursor:"pointer",position:"absolute",left:t,top:o,width:a,filter:null!==i&&"string"==typeof i&&(1===e.id||2===e.id||3===e.id||4===e.id||5===e.id)&&i.includes(e.id.toString())?"drop-shadow(0 0 8px #FFEA94) drop-shadow(0 0 4px #FFEA94)":"none"},src:e.src,alt:"",onMouseEnter:()=>H(e.id.toString()),onMouseLeave:()=>s(null)},e.id)}),3===h&&(0,n.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",color:"#fff"},children:(0,n.jsxs)("div",{ref:Q,style:{width:"480px",height:"444px",background:"#1E1E1E",marginTop:"10%",marginLeft:"37%",border:"2px solid #C8C8C8",padding:"20px 50px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"24px",marginBottom:"20px"},children:[(0,n.jsx)("p",{children:"Open friend list"}),(0,n.jsx)("p",{style:{cursor:"pointer"},onClick:()=>x(null),children:"X"})]}),(0,n.jsx)("div",{style:{height:"350px",overflowY:"auto"},children:Y&&Y.length>0?Y.map((e,t)=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,n.jsx)("img",{src:e.ico,style:{marginRight:"14px",width:"48px",height:"48px",borderRadius:"50%"}}),(0,n.jsx)("p",{children:e.npcName})]},t)):(0,n.jsx)("p",{children:(0,n.jsx)(p.Z,{size:50,sx:{color:"#ececec"}})})})]})}),4===h&&(0,n.jsx)("div",{style:{position:"absolute",width:"100%",height:"80%",color:"#fff"},children:(0,n.jsxs)("div",{ref:Q,style:{border:"1px solid #C8C8C8",background:"#1E1E1E",width:"576px",position:"absolute",top:"30%",left:"30%",padding:"20px 50px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"28px"},children:[(0,n.jsx)("p",{children:"Personal Center"}),(0,n.jsx)("p",{style:{cursor:"pointer"},onClick:()=>x(null),children:"X"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,n.jsx)("img",{style:{width:"100px",marginTop:"24px"},src:D.bust_person_center,alt:""}),(0,n.jsxs)("div",{style:{marginLeft:"20px",width:"80%"},children:[(0,n.jsx)("p",{style:{marginTop:"20px"},children:localStorage.getItem("inputValueName")}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"40px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("img",{src:"/wallte.svg",alt:""}),(0,n.jsx)("p",{style:{margin:"0 0 0 10px"},children:"Soul Address"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[m&&"string"==typeof m&&(0,n.jsx)("p",{style:{margin:"0 0 0 10px"},children:m.slice(0,4)+"***"+m.slice(-4)}),(0,n.jsx)("img",{style:{marginLeft:"10px",cursor:"pointer"},src:"/copy.svg",alt:"",onClick:P(m)})]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"40px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("img",{src:"/keys.svg",alt:""}),(0,n.jsx)("p",{style:{margin:"0 10px"},children:"Private Key"}),(0,n.jsx)("img",{src:"/info-circle.svg",alt:""})]}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,n.jsx)("img",{style:{marginLeft:"10px",cursor:"pointer"},src:"/copy.svg",alt:"",onClick:P(w)})})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"40px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("img",{src:"/robot.svg",alt:""}),(0,n.jsx)("p",{style:{margin:"0 10px"},children:"AI Instruction"}),(0,n.jsx)("img",{src:"/info-circle.svg",alt:""})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[j&&"string"==typeof j&&(0,n.jsx)("p",{style:{margin:"0 0 0 10px"},children:j.slice(0,4)+"..."+j.slice(-4)}),(0,n.jsx)("img",{style:{marginLeft:"10px",cursor:"pointer"},src:"/copy.svg",alt:"",onClick:P(j)})]})]}),en&&(0,n.jsx)("div",{style:{height:"60px",overflowY:"auto",margin:"0 0 16px 24px"},children:en}),(0,n.jsx)("div",{style:{height:"40px"},children:(0,n.jsxs)("a",{style:{color:"#fff",display:"flex",alignItems:"center"},href:"https://discord.com/invite/RsDbxAdtu7",target:"_blank",children:[(0,n.jsx)("img",{src:"/DC.png",alt:"",style:{width:"16px",marginRight:"10px"}}),"Join our DC to discuss"]})}),(0,n.jsx)("div",{})]})]})]})}),5===h&&(0,n.jsx)("div",{style:{position:"absolute",width:"100%",height:"80%",color:"#fff"},children:(0,n.jsxs)("div",{ref:Q,style:{height:"220px",overflowY:"auto",position:"absolute",top:"30%",left:"30%",padding:"20px 50px"},children:[(0,n.jsx)("textarea",{className:"input",placeholder:"Chat with your friends here!",style:{width:"480px",background:"rgba(0, 0, 0, 0.8)",border:"2px solid rgba(255, 255, 255, 0.4)",color:"#ececec",marginBottom:"20px",outline:"none",padding:"10px",borderRadius:"10px",resize:"none",overflowY:"auto",boxSizing:"border-box"},value:Z,onChange:e=>K(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),V())}}),!O&&(0,n.jsx)("div",{onClick:V,style:{backgroundImage:"url(/continue_bg.svg)",width:"480px",height:"64px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:"Continue"}),O&&(0,n.jsx)("div",{style:{backgroundImage:"url(/continue_bg.svg)",width:"480px",height:"64px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:(0,n.jsx)(p.Z,{size:50,sx:{color:"#000"}})})]})})]})}),A&&(0,n.jsx)(f,{npcImg:C,npcName:k,message:F,nextQuestion:()=>{}})]})},S=()=>{let[e,t]=(0,l.useState)(!0),[i,s]=(0,l.useState)(!0),r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{r.current&&(e?r.current.play():r.current.pause())},[e]),(0,n.jsxs)("div",{onClick:()=>{t(!e),s(!i)},style:{position:"absolute",right:"20px",top:"20px",cursor:"pointer",width:"48px",height:"48px",background:"rgba(0, 0, 0, 0.72)",border:"3px solid #C8C8C8",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:100},children:[(0,n.jsx)("img",{style:{animation:i?"rotate 3s linear infinite":"none"},src:"/music-fill.svg",alt:"Music Icon"}),(0,n.jsx)("audio",{ref:r,src:"/music-file.mp3",autoPlay:!0,loop:!0})]})};function C(e){let{children:t}=e,i=(0,a.useRouter)(),[s,r]=(0,l.useState)(""),[o,d]=(0,l.useState)(!1),{createAOAgentUpload:c}=(0,g.N2)(),[p,u]=(0,l.useState)(null),[h,x]=(0,l.useState)(null),[f,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{{let e=JSON.parse(localStorage.getItem("npc")||"{}");if(C(e),e.icoConfig)try{let t=e.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"'),i=JSON.parse(t);C(i)}catch(e){console.error("Error parsing npcConfig:",e)}}},[]);let I=[{id:1,x:"45%",y:"22%",width:16,height:20,src:"/dianshi.png"},{id:2,x:"63%",y:"28%",width:9,height:33,src:"/youxiji.png"},{id:3,x:"75%",y:"64%",width:10,height:29,src:"/shafa.png"},{id:4,x:"55%",y:"68.4%",width:7,height:16,src:f&&f.sofa}];(0,l.useEffect)(()=>{let e=i.query.stage;if((e||i.isReady)&&(r(e||"inputName"),localStorage.setItem("currentStage",e||"inputName"),!localStorage.getItem("aoProfileId"))){var t,n,s,o,a;let e=null!==(t=localStorage.getItem("accountUserName"))&&void 0!==t?t:"",i=null!==(n=localStorage.getItem("accountDisplayName"))&&void 0!==n?n:"",r=null!==(s=localStorage.getItem("accountDescription"))&&void 0!==s?s:"",l=null!==(o=localStorage.getItem("accountProfileImage"))&&void 0!==o?o:"",d=null!==(a=localStorage.getItem("accountCoverImage"))&&void 0!==a?a:"";if(!e)return;console.log("执行router query"),c(e,i,r,l,d,"")}d(!0)},[i.query,i.isReady]),(0,l.useEffect)(()=>{},[]),(0,l.useEffect)(()=>{{let e=()=>{u(window.innerWidth),x(window.innerHeight)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}},[]);let k=()=>{"inputName"===s?(i.push({query:{stage:"questions"}}),r("questions")):"questions"===s?(i.push({query:{stage:"lookContinue"}}),r("lookContinue")):"lookContinue"===s?(i.push({query:{stage:"addFriend"}}),r("addFriend")):"addFriend"===s&&(i.push({query:{stage:"appMain"}}),r("appMain"))};return(0,n.jsxs)("div",{className:"hang_name",children:["appMain"!==s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:"/hang_out_bg.png",alt:"bg",style:{position:"fixed",width:"100%",height:"100%"}}),I.map(e=>{var t;let{x:i,y:s,width:r,height:o}=b(e,p,h);return(0,n.jsx)("img",{style:{position:"absolute",left:i,top:s,width:r},src:null!==(t=e.src)&&void 0!==t?t:"",alt:""},e.id)})]}),(0,n.jsx)(S,{}),o&&"inputName"===s&&(0,n.jsx)(m,{onContinue:k}),o&&"addFriend"===s&&(0,n.jsx)(v,{onContinue:k}),o&&"questions"===s&&(0,n.jsx)(y,{onContinue:k}),o&&"appMain"===s&&(0,n.jsx)(j,{onContinue:k}),o&&"lookContinue"===s&&(0,n.jsx)(w,{onContinue:k})]})}let I="";function k(){(0,a.useRouter)();let{breakpoints:e}=(0,s.Z)(),t=(0,r.Z)(e.down("lg"));return(console.log(t,"downLgdownLgdownLg"),t)?(0,n.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"100%",height:"fit-content"}}):(0,n.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",mt:"120px",mr:"100px",width:"fit-content",height:"600px"}})}k.getLayout=function(e){return(0,n.jsx)(C,{children:e})}}},function(e){e.O(0,[645,930,973,745,467,790,888,774,179],function(){return e(e.s=9395)}),_N_E=e.O()}]);