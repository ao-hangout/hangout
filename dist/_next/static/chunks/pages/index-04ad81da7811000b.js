(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5098:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var o=n(7462),i=n(3366),r=n(3390),s=n(4953),a=n(7172),l=n(6523);let c=["ownerState"],p=["variants"],u=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function d(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}let g=(0,a.Z)(),h=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function f({defaultTheme:e,theme:t,themeId:n}){return 0===Object.keys(t).length?e:t[n]||t}function m(e,t){let{ownerState:n}=t,r=(0,i.Z)(t,c),s="function"==typeof e?e((0,o.Z)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap(e=>m(e,(0,o.Z)({ownerState:n},r)));if(s&&"object"==typeof s&&Array.isArray(s.variants)){let{variants:e=[]}=s,t=(0,i.Z)(s,p);return e.forEach(e=>{let i=!0;"function"==typeof e.props?i=e.props((0,o.Z)({ownerState:n},r,n)):Object.keys(e.props).forEach(t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)}),i&&(Array.isArray(t)||(t=[t]),t.push("function"==typeof e.style?e.style((0,o.Z)({ownerState:n},r,n)):e.style))}),t}return s}var x=function(e={}){let{themeId:t,defaultTheme:n=g,rootShouldForwardProp:a=d,slotShouldForwardProp:c=d}=e,p=e=>(0,l.Z)((0,o.Z)({},e,{theme:f((0,o.Z)({},e,{defaultTheme:n,themeId:t}))}));return p.__mui_systemSx=!0,(e,l={})=>{var g;let x;(0,r.internal_processStyles)(e,e=>e.filter(e=>!(null!=e&&e.__mui_systemSx)));let{name:w,slot:_,skipVariantsResolver:y,skipSx:v,overridesResolver:b=(g=h(_))?(e,t)=>t[g]:null}=l,j=(0,i.Z)(l,u),Z=void 0!==y?y:_&&"Root"!==_&&"root"!==_||!1,S=v||!1,k=d;"Root"===_||"root"===_?k=a:_?k=c:"string"==typeof e&&e.charCodeAt(0)>96&&(k=void 0);let C=(0,r.default)(e,(0,o.Z)({shouldForwardProp:k,label:x},j)),F=e=>"function"==typeof e&&e.__emotion_real!==e||(0,s.P)(e)?i=>m(e,(0,o.Z)({},i,{theme:f({theme:i.theme,defaultTheme:n,themeId:t})})):e,I=(i,...r)=>{let s=F(i),a=r?r.map(F):[];w&&b&&a.push(e=>{let i=f((0,o.Z)({},e,{defaultTheme:n,themeId:t}));if(!i.components||!i.components[w]||!i.components[w].styleOverrides)return null;let r=i.components[w].styleOverrides,s={};return Object.entries(r).forEach(([t,n])=>{s[t]=m(n,(0,o.Z)({},e,{theme:i}))}),b(e,s)}),w&&!Z&&a.push(e=>{var i;let r=f((0,o.Z)({},e,{defaultTheme:n,themeId:t}));return m({variants:null==r||null==(i=r.components)||null==(i=i[w])?void 0:i.variants},(0,o.Z)({},e,{theme:r}))}),S||a.push(p);let l=a.length-r.length;if(Array.isArray(i)&&l>0){let e=Array(l).fill("");(s=[...i,...e]).raw=[...i.raw,...e]}let c=C(s,...a);return e.muiName&&(c.muiName=e.muiName),c};return C.withConfig&&(I.withConfig=C.withConfig),I}}()},9628:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(539),i=n(6682);function r({props:e,name:t,defaultTheme:n,themeId:r}){let s=(0,i.Z)(n);return r&&(s=s[r]||s),(0,o.Z)({theme:s,name:t,props:e})}},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1473)}])},9979:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var o=n(3366),i=n(7462),r=n(7294),s=n(512),a=n(4867),l=n(4780),c=n(4142),p=n(9628),u=n(5098),d=n(7172),g=n(5893);let h=["className","component","disableGutters","fixed","maxWidth","classes"],f=(0,d.Z)(),m=(0,u.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`maxWidth${(0,c.Z)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),x=e=>(0,p.Z)({props:e,name:"MuiContainer",defaultTheme:f}),w=(e,t)=>{let{classes:n,fixed:o,disableGutters:i,maxWidth:r}=e,s={root:["root",r&&`maxWidth${(0,c.Z)(String(r))}`,o&&"fixed",i&&"disableGutters"]};return(0,l.Z)(s,e=>(0,a.ZP)(t,e),n)};var _=n(5228),y=n(9262),v=n(6522),b=function(e={}){let{createStyledComponent:t=m,useThemeProps:n=x,componentName:a="MuiContainer"}=e,l=t(({theme:e,ownerState:t})=>(0,i.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((t,n)=>{let o=e.breakpoints.values[n];return 0!==o&&(t[e.breakpoints.up(n)]={maxWidth:`${o}${e.breakpoints.unit}`}),t},{}),({theme:e,ownerState:t})=>(0,i.Z)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}));return r.forwardRef(function(e,t){let r=n(e),{className:c,component:p="div",disableGutters:u=!1,fixed:d=!1,maxWidth:f="lg"}=r,m=(0,o.Z)(r,h),x=(0,i.Z)({},r,{component:p,disableGutters:u,fixed:d,maxWidth:f}),_=w(x,a);return(0,g.jsx)(l,(0,i.Z)({as:p,ownerState:x,className:(0,s.Z)(_.root,c),ref:t},m))})}({createStyledComponent:(0,y.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,_.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,v.i)({props:e,name:"MuiContainer"})})},1473:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var o=n(5893),i=n(9360),r=n(1730),s=n(4440);n(9979);var a=n(7294),l=n(1163),c=n(5490),p=n(9784);let u=async e=>{let t=await c.W.post(p.Z.post_get_awareness);if(1===t.code&&t.aoAwareness)e.push({pathname:"/hangName",query:{stage:"appMain"}});else{let t=localStorage.getItem("currentStage")||"inputName";e.push({pathname:"/hangName",query:{stage:t}})}},d=()=>{let e=(0,l.useRouter)(),[t,n]=(0,a.useState)(""),[s,d]=(0,a.useState)(""),[g,h]=(0,a.useState)(""),[f,m]=(0,a.useState)(!1),{breakpoints:x}=(0,i.Z)(),w=(0,r.Z)(x.down("lg"));async function _(){let e=await c.W.post(p.Z.post_hangout_dispatch_npc);if(1===e.code){var t,o;localStorage.setItem("npc",JSON.stringify(e.npc)),n(null===(t=e.npc)||void 0===t?void 0:t.name),d(JSON.parse(e.npc.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"')).bust_chat);let i=(await c.W.post(p.Z.post_npc_agent_chatStream,{npcId:null===(o=e.npc)||void 0===o?void 0:o.id,conversationType:"tone",query:"欢迎回家，你看起来有些疲惫，坐下休息一会儿吧（用你的口吻表达）"})).split("\n").filter(e=>""!==e.trim()),r=[];i.forEach(e=>{let t=JSON.parse(e.replace("data:",""));"message"===t.event||"agent_message"===t.event?r.push(t.answer):"message_file"===t.event&&r.push(t.url)}),h(r.filter(e=>""!==e).join(""))}}return(0,a.useEffect)(()=>{localStorage.getItem("jwt")&&m(!0)},[]),(0,a.useEffect)(()=>{_()},[]),(0,o.jsx)("div",{className:"footer",onClick:()=>{f&&u(e)},style:{position:"fixed",background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 20%)",bottom:0,width:"100%",height:"150px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 10%",color:"#ECECEC"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("img",{src:s,alt:"",style:{marginBottom:"30px",width:w?"40px":"220px"}}),(0,o.jsxs)("div",{style:{marginLeft:"20px"},children:[(0,o.jsx)("div",{style:{color:"#C8C8C8",height:"32px",textAlign:"left",paddingLeft:"4px",lineHeight:"32px"},children:t}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"flex-end"},children:[(0,o.jsx)("div",{style:{lineHeight:"30px",width:w?"200px":"830px"},children:g}),s&&(0,o.jsx)("img",{src:"/footer_bottom.jpg",alt:"",style:{width:"20px",marginTop:"20px",cursor:"pointer"},className:"logo_loading"})]})]})]})})},g=(e,t,n)=>{let o=parseFloat(e.x)*(t||100)/100;return{x:o,y:parseFloat(e.y)*(n||100)/100,width:parseFloat(e.width)*(t||100)/100,height:parseFloat(e.height)*(n||100)/100}},h=()=>{let[e,t]=(0,a.useState)(!0),[n,i]=(0,a.useState)(!0),r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{r.current&&(e?r.current.play():r.current.pause())},[e]),(0,o.jsxs)("div",{onClick:()=>{t(!e),i(!n)},style:{position:"absolute",right:"20px",top:"20px",cursor:"pointer",width:"48px",height:"48px",background:"rgba(0, 0, 0, 0.72)",border:"3px solid #C8C8C8",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,o.jsx)("img",{style:{animation:n?"rotate 3s linear infinite":"none"},src:"/music-fill.svg",alt:"Music Icon"}),(0,o.jsx)("audio",{ref:r,src:"/music-file.mp3",autoPlay:!0})]})};function f(e){let{children:t,containerSx:n,useContainer:f=!0,withinPage:m=!1,withBGPage:x=!1,withFooter:w=!1,hidFooterInMobile:_=!1}=e,{breakpoints:y}=(0,i.Z)(),v=(0,r.Z)(y.down("lg")),b=(0,l.useRouter)(),[j,Z]=(0,a.useState)(!0),[S,k]=(0,a.useState)(!1),[C,F]=(0,a.useState)(null),[I,N]=(0,a.useState)(null),[E,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{setTimeout(()=>{let e=JSON.parse(localStorage.getItem("npc")||"{}");if(A(e),e.icoConfig)try{let t=e.icoConfig.replace(/\n/g,"").replace(/“|”/g,'"'),n=JSON.parse(t);A(n)}catch(e){console.error("Error parsing npcConfig:",e)}},4e3)},[]);let R=[{id:1,x:"45%",y:"22%",width:16,height:20,src:"/dianshi.png"},{id:2,x:"63%",y:"28%",width:9,height:33,src:"/youxiji.png"},{id:3,x:"75%",y:"64%",width:10,height:29,src:"/shafa.png"},{id:4,x:"55%",y:"68.4%",width:7,height:16,src:E&&E.sofa}];(0,a.useEffect)(()=>{localStorage.removeItem("currentStage"),localStorage.removeItem("addfirend"),localStorage.removeItem("inputValueName"),localStorage.getItem("jwt")&&(k(!0),"true"==localStorage.getItem("followSmash")&&W())},[]),(0,a.useEffect)(()=>{{let e=()=>{F(window.innerWidth),N(window.innerHeight)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}},[]),(0,a.useEffect)(()=>{setTimeout(()=>{Z(!1)},5e3)},[]);let W=async()=>{try{let e=await c.W.post(p.Z.post_follow_hangout_follow,{},{headers:{"Content-Type":"application/json"}});e&&1==e.code?(console.log("FollowTwitterResponse+",e),localStorage.setItem("followSmash","false")):console.log("FollowTwitterResponse+ error",e.data)}catch(e){console.error(e)}},T=()=>{let e=new URLSearchParams({redirect_uri:"https://hangout.aogames.org/oauth/",client_id:"YTdIeG1WMmMzR1EydTJXak8yTlY6MTpjaQ",state:"state",response_type:"code",code_challenge:"y_SfRG4BmOES02uqWeIkIgLQAlTBggyf_G7uKT51ku8",code_challenge_method:"S256",scope:"users.read tweet.read follows.write"}).toString();return"undefined"!=typeof localStorage&&localStorage.setItem("previousOauthPage","HangoutHome"),"".concat("https://twitter.com/i/oauth2/authorize","?").concat(e)};return v?(0,o.jsx)(s.Z,{sx:{minHeight:"100vh",background:"#FAFAFA"},children:x?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:"/hang_out_bg.png",alt:"bg",style:{position:"fixed",width:"100%",height:"100%",objectFit:"cover"},onClick:()=>{S&&u(b)}}),S?(0,o.jsx)("div",{}):(0,o.jsx)("a",{className:"a-button row-container",href:T(),style:{textDecoration:"none",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#FFFFFF",padding:"10px 20px",cursor:"pointer",width:"280px",height:"64px",display:"flex",justifyContent:"center",fontSize:"20px",alignItems:"center",background:"#000",border:"1px solid",borderRadius:"10px"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("img",{src:"/twitter.svg",alt:"Twitter Icon",className:"twitter-icon"}),"\xa0\xa0",(0,o.jsx)("p",{children:"Twitter Login"})]})}),(0,o.jsx)(d,{})]}):null}):(0,o.jsx)(s.Z,{className:"hang_name",component:"div",sx:[{display:{xs:"none",lg:"flex"},background:"#FAFAFA",flexDirection:"column"},m&&!w?{height:"100vh"}:{minHeight:"100vh"}],children:x?(0,o.jsxs)(o.Fragment,{children:[j&&(0,o.jsx)("div",{style:{zIndex:100,background:"#212121",width:"100%",height:"100vh",display:"flex",justifyContent:"center"},children:(0,o.jsx)("img",{src:"/logo_loading.svg",alt:"",className:"logo_loading"})}),(0,o.jsx)("img",{src:"/hang_out_bg.png",alt:"bg",style:{position:"fixed",width:"100%",height:"100%"},onClick:()=>{S&&u(b)}}),R.map(e=>{var t;let{x:n,y:i,width:r,height:s}=g(e,C,I);return(0,o.jsx)("img",{style:{position:"absolute",left:n,top:i,width:r},src:null!==(t=e.src)&&void 0!==t?t:"",alt:""},e.id)}),(0,o.jsx)(h,{}),S?(0,o.jsx)("div",{}):(0,o.jsx)("a",{className:"a-button row-container",href:T(),style:{textDecoration:"none",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#FFFFFF",padding:"10px 20px",cursor:"pointer",backgroundImage:"url(/twitter_background.png)",width:"480px",height:"64px",display:"flex",justifyContent:"center",fontSize:"20px",alignItems:"center"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("img",{src:"/twitter.svg",alt:"Twitter Icon",className:"twitter-icon"}),"\xa0\xa0",(0,o.jsx)("p",{children:"Twitter Login"})]})}),(0,o.jsx)(d,{})]}):null})}function m(e){let{children:t}=e;return(0,o.jsx)(f,{withBGPage:!0,children:(0,o.jsxs)(s.Z,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"}},children:[(0,o.jsx)(s.Z,{sx:{width:188,borderRadius:"20px",display:{xs:"none",lg:"flex"},flexShrink:0,bgcolor:"#ffff",p:"24px 8px",mr:6,minHeight:{xs:"unset",xl:"calc(100vh - 120px)"}}}),(0,o.jsx)(s.Z,{width:"100%",children:t})]})})}function x(){let{breakpoints:e}=(0,i.Z)();return(0,r.Z)(e.down("lg")),(0,a.useEffect)(()=>{},[]),(0,o.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,o.jsx)(o.Fragment,{})})}x.getLayout=function(e){return(0,o.jsx)(m,{children:e})}},623:function(e,t,n){"use strict";var o=n(5893),i=n(3935),r=n(3438),s=n(280),a=n(7294);function l(e){let{content:t,type:n}=e,[i,l]=(0,a.useState)(!0);return(0,o.jsx)(r.Z,{open:i,autoHideDuration:5e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:()=>l(!1),children:(0,o.jsx)(s.Z,{severity:n,children:"timeout of 60000ms exceeded"===t?"Network connection is unstable.":t})})}t.Z={dom:null,error(e){this.dom=document.createElement("div");let t=(0,o.jsx)(l,{content:e,type:"error"});i.render(t,this.dom),document.body.appendChild(this.dom)}}},9784:function(e,t){"use strict";let n={};n.post_oauth_login="/user-api/user/twitterOAuthLogin",n.post_bind_pk_friend="/ao-api/fission/bindPKFriend",n.post_start_pk="/ao-api/fission/pk",n.post_pk_friend_list="/ao-api/fission/pkFriends",n.post_user_gamerole_evaluation="/ao-api/fission/roleEvaluation",n.post_hangout_dispatch_npc="/ao-api/hangout/dispatchNPC",n.post_npc_agent_chatStream="/ao-api/hangout/chatNPC",n.post_npc_upload_awareness="/ao-api/hangout/uploadAwareness",n.post_add_friend="/ao-api/hangout/addFriend",n.post_hangout_friend_list="/ao-api/hangout/friends",n.post_follow_hangout_follow="/ao-api/fission/followTwitter",n.post_share_success_addPK="/ao-api/fission/share",n.post_get_leftpktimes="/ao-api/fission/getLeftPkTimes",n.post_user_createwallet="/user-api/wallet/createWallet",n.get_user_wallet="/user-api/wallet/myWallet",n.post_get_awareness="/ao-api/hangout/getAwareness",n.post_upload_awareness_url="/ao-api/hangout/uploadAwarenessUrl",t.Z=n},5490:function(e,t,n){"use strict";n.d(t,{W:function(){return p}});var o=n(9669),i=n.n(o),r=n(1163),s=n.n(r),a=n(623);let l=i().create({timeout:6e4,baseURL:"https://api2.glbgpt.com/"});l.interceptors.request.use(e=>{let t=localStorage.getItem("jwt");if(t){let n=(null==e?void 0:e.headers)||{};e.headers={...n,Authorization:"".concat(t)}}return e},e=>{console.log(e),Promise.reject(e)});let c=function(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(e){case"get":n=l.get(t,{params:{...o},...i});break;case"post":n=l.post(t,{...o},{...i});break;case"put":n=l.put(t,{...o},{...i});break;case"delete":n=l.delete(t,{params:{...o},...i})}return new Promise((e,t)=>{n.then(t=>{let n=t.data;200!==n.code?(401==n.code&&(a.Z.error("Your access token is expired. Please login again."),localStorage.removeItem("jwt"),s().replace("/campaign")),402==n.code&&(a.Z.error("Please log in to get access token"),s().replace("/campaign")),e(n)):e(n.data)}).catch(e=>{console.log("something went wrong",e),a.Z.error(e.message),t(e)})})},p={get:(e,t,n)=>c("get",e,t,n),post:(e,t,n)=>c("post",e,t,n),put:(e,t,n)=>c("put",e,t,n),delete:(e,t,n)=>c("delete",e,t,n)}}},function(e){e.O(0,[930,973,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);